<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laser Welder Training Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Red, Dark Grey, Navy, White -->
    <!-- Application Structure Plan: The SPA uses a tab-based navigation system to provide a non-linear, task-oriented experience. This is more effective for post-training reference than a chronological format, allowing users to quickly access specific information (e.g., G-Code commands, maintenance tasks). The key sections are: Welcome, Fundamentals, Machine Tour, an interactive Weld Lab, MotionFX guide, and a Maintenance checklist. The structure prioritizes usability and quick information retrieval. The interactive Weld Lab is the centerpiece, designed to build intuitive understanding through direct manipulation and visual feedback. -->
    <!-- Visualization & Content Choices: 
        - Laser Parameters -> Goal: Change/Relate -> Viz: Interactive Chart.js line chart controlled by sliders -> Interaction: User drags sliders for Energy, Pulse Width, etc., to see real-time updates on the weld profile chart -> Justification: Provides immediate, memorable visual feedback on how abstract parameters create physical weld characteristics -> Library: Chart.js.
        - Pulse Shapes -> Goal: Compare -> Viz: Dynamic Chart.js bar chart and descriptive text -> Interaction: User selects a pulse profile from a dropdown to view its energy distribution and recommended use case -> Justification: Clearly visualizes and explains the difference and purpose of each specialized pulse shape -> Library: Chart.js.
        - G-Code Commands -> Goal: Organize/Inform -> Viz: An interactive grid of G-Code commands -> Interaction: Clicking a command opens a modal with a detailed explanation and example -> Justification: A fast and efficient lookup tool for operators programming the machine -> Library/Method: HTML/CSS/JS.
        - Machine Components -> Goal: Inform/Organize -> Viz: A simple, clean card layout for different components -> Interaction: Users can read about each component in a structured way -> Justification: An easy-to-digest overview of the physical machine parts -> Library/Method: HTML/CSS/JS.
        - Maintenance Schedule -> Goal: Inform -> Viz: A clear, checklist-style layout with icons -> Interaction: Simple information display -> Justification: Provides a quick, scannable reference for required maintenance tasks. -> Library/Method: HTML/CSS/JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Roboto', sans-serif; }
        .tab-active { border-color: #dc2626; color: #dc2626; background-color: #fef2f2; } /* Red-600 border, text, Red-50 background */
        .tab-inactive { border-color: transparent; color: #4b5563; } /* Gray-700 for dark grey text */
        .content-active { display: block; }
        .content-inactive { display: none; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }

        /* Custom styles for axis labels */
        .axis-label-x {
            position: absolute;
            bottom: -20px; /* Adjusted to move label up */
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* gray-700 */
        }
        .axis-label-y {
            position: absolute;
            left: -30px; /* Adjust as needed */
            top: 50%;
            transform: translateY(-50%) rotate(-90deg);
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* gray-700 */
            white-space: nowrap; /* Prevent text wrapping */
        }
        /* Class for clickable images - Removed cursor: zoom-in */
        .zoomable-image {
            border: 2px solid black; /* Thicker black border */
        }
        /* No zoomed-in-image styling needed as zoom functionality is removed */
    </style>
</head>
<body class="bg-white text-gray-800">

    <div id="app" class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="text-center mb-8">
            <img src="https://process.fs.teachablecdn.com/ADNupMnWyR7kCWRvm76Laz/resize=height:60/https://www.filepicker.io/api/file/qhqqxrJFS5YHLxqoVg22" alt="LaserStar Technologies Logo" class="mx-auto mb-4 h-16">
            <h1 class="text-3xl sm:text-4xl font-bold text-red-600">Laser Welder Training Guide</h1>
            <p class="mt-2 text-lg text-gray-700">An Interactive Course by Nolan McGinley, Laser Applications Engineer</p>
        </header>

        <nav class="mb-8 overflow-x-auto pb-2">
            <ul id="tabs" class="flex flex-nowrap border-b border-gray-200 text-center text-sm font-medium">
                <li class="flex-shrink-0"><button class="nav-tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="welcome_overview">Welcome & Overview</button></li>
                <li class="flex-shrink-0"><button class="nav-tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="fundamentals">Fundamentals</button></li>
                <li class="flex-shrink-0"><button class="nav-tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="fiber_lab">Fiber Lab</button></li>
                <li class="flex-shrink-0"><button class="nav-tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="flashlamp_lab">Flashlamp Lab</button></li>
                <li class="flex-shrink-0"><button class="nav-tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="motionfx">MotionFX</button></li>
                <li class="flex-shrink-0"><button class="nav-tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="maintenance">Maintenance</button></li>
                <li class="flex-shrink-0"><button class="nav-tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="files">Files</button></li>
                <li class="flex-shrink-0"><button class="nav-tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="pre_training_email">Pre-Training Email</button></li>
            </ul>
        </nav>

        <main id="tab-content">
        </main>

    </div>

    <div id="modal-container" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 p-4 items-center justify-center hidden">
        <div id="modal-content" class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-full overflow-y-auto p-6 relative">
            <button id="modal-close" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <div class="container mx-auto p-4 mt-8 text-center text-sm text-gray-500">
        <p>Note: This is meant for internal use only. Do not share with customers unless explicitly directed. Information varies based on model number.</p>
    </div>

    <script>
        const appData = {
            welcome_overview: { // Combined tab
                title: 'Welcome & Training Overview',
                content: `
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <h2 class="text-2xl font-bold mb-4 text-red-600">Course Overview</h2>
                        <p class="mb-4 text-gray-700">This interactive guide is designed to supplement your laser welding training. It provides a flexible way to explore key concepts, from laser theory and safety to advanced welding techniques and machine maintenance. Use the navigation tabs above to jump to any topic.</p>
                        <img src="https://img.directindustry.com/images_di/photo-g/53219-18928242.webp" alt="Industrial Laser Welder" class="mx-auto my-6 rounded-lg shadow-md w-full max-w-xs">
                        
                        <h2 class="text-2xl font-bold mb-6 text-red-600">Training Overview</h2> 
                        <p class="mb-6 text-gray-700">This section provides a consolidated overview of training modules for both Fiber and Nd:YAG Lasers. Click on any module title to view its detailed description and covered topics.</p>
                        
                        <div class="space-y-4">
                            <h3 class="font-semibold text-xl mt-6 mb-3 text-red-600">Laser Training Modules</h3>
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Introduction to Laser Systems & Safety
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li class="ml-4">Welcome & Introductions: Course overview and attendee introductions.</li>
                                        <li class="ml-4">Laser Theory & Principles: What is a LASER?, monochromatic light, and key terms (Energy (J), Pulse Width, Frequency, Peak Power, Average Power, Burst Mode).</li>
                                        <li class="ml-4">Laser Safety: Understanding Class 4 systems, eye protection (OD >6.5), remote interlocks, view shutters, and safety glass applicable to all laser types.</li>
                                    </ul>
                                </div>
                            </details>
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Machine Components & Initial Setup
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li class="ml-4">Power-Up Procedure: Step-by-step guide including Power, and Key for general laser systems.</li>
                                        <li>Inert Gas Overview: Importance of Argon (preventing oxidation), gas regulator settings (CFH, PSI), nozzle aiming, and gas activation for general laser systems.</li>
                                        <li class="ml-4">Laser Engine & Optical Rail: Overview of laser engine (1064nm, fiber optic cable) and optical rail components (Collimator, Shutter, Beam Expander, Beam Bender, Beam Waist concept) applicable to relevant laser types.</li>
                                        <li>Nd:YAG Specifics: Introduction to flashlamps, cooling systems, and optical components unique to Nd:YAG lasers.</li>
                                    </ul>
                                </div>
                            </details>
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Weld Chamber/System Overview & Basic Alignment
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li class="ml-4">Weld Chamber/System Overview: Familiarization with internal components (LED lights, fan filter, Argon nozzle, dimmer) for general laser systems.</li>
                                        <li class="ml-4">Crosshair Alignment: Procedure for aligning the crosshair with the weld spot, applicable to both Fiber and Nd:YAG.</li>
                                        <li class="ml-4">Camera Setup: Steps for configuring the machine's camera for visual focus.</li>
                                    </ul>
                                </div>
                            </details>
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Laser Parameters & Weld Characteristics
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Anatomy of a Weld: Exploring the Gaseous, Liquid, and Heat Affected Zone (HAZ).</li>
                                        <li>Detailed Laser Parameters: In-depth look at Energy, Pulse Width, Frequency, Beam Diameter, Burst Mode, and the various Pulse Shapes (P3) applicable to both laser types.</li>
                                        <li>How Parameters Affect Welds: Visualizing and discussing the impact of parameter changes on weld outcomes for general laser systems.</li>
                                    </ul>
                                </div>
                            </details>
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Weld Types & Optimizing Welds
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Keyhole Weld: Deep, narrow, robust weld created by high power density. Ideal for strong, complete joints.</li>
                                        <li>Cold Weld (Smoothing/Hammering): Shallow, wide weld from a spread-out beam. Excellent for surface finishing.</li>
                                        <li>Holes/Pits: Undesirable cavities caused by excessive power concentration. Indicates parameters need adjustment.</li>
                                        <li>Weld Overlap & Weld Beads: Goals for regular and hermetically sealed welds, and the Overlap formula (Frequency / Speed).</li>
                                    </ul>
                                </div>
                            </details>
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Control Software & Programming
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Introduction to MotionFX & G-Code: Multi-axis control and programming fundamentals (Absolute vs. Relative Coordinates).</li>
                                        <li>MotionFX Menu Selection & Jog Traditional: Overview of menus (Jog Traditional, Main, Auto-Feed Jog, Create Shapes, Edit Programs, Teach Mode) and manual jogging.</li>
                                        <li>Creating/Editing Shapes with G-Code: Generating G-code for shapes within MotionFX.</li>
                                    </ul>
                                </div>
                            </details>
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Maintenance & Troubleshooting
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Daily: Cleaning cabinet surfaces, protective windows, and protective discs.</li>
                                        <li>Weekly: Checking crosshair alignment and splash protector.</li>
                                        <li>Monthly: Replacing air filters, inspecting laser for damage, cleaning heat exchanger, checking water level (Nd:YAG specific), checking laser energy (Nd:YAG specific).</li>
                                        <li>Quarterly: Changing de-ionized/distilled water (Nd:YAG specific).</li>
                                        <li>Every Six Months: Changing water filter (Nd:YAG specific).</li>
                                    </ul>
                                </div>
                            </details>
                        </div>
                    </div>
                `,
                // Combined modules for general laser training, to be accessed by a single 'general_laser' category
                general_laser_modules_content: [
                    {
                        id: 'module1',
                        title: 'Introduction to Laser Systems & Safety',
                        details: `
                            <p class="mb-4">This module covers the foundational aspects of laser systems and essential safety measures.</p>
                            <h4 class="font-semibold mt-4 mb-2">Details:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li class="ml-4">Welcome & Introductions: Course overview and attendee introductions.</li>
                                <li class="ml-4">Laser Theory & Principles: What is a LASER?, monochromatic light, and key terms (Energy (J), Pulse Width, Frequency, Peak Power, Average Power, Burst Mode).</li>
                                <li class="ml-4">Laser Safety: Understanding Class 4 systems, eye protection (OD >6.5), remote interlocks, view shutters, and safety glass applicable to all laser types.</li>
                            </ul>
                        `
                    },
                    {
                        id: 'module2',
                        title: 'Machine Components & Initial Setup',
                        details: `
                            <p class="mb-4">This module delves into the physical components of the laser system and guides you through the essential initial setup procedures for operation.</p>
                            <h4 class="font-semibold mt-4 mb-2">Details:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li class="ml-4">Power-Up Procedure: Step-by-step guide including Power, and Key for general laser systems.</li>
                                <li>Inert Gas Overview: Importance of Argon (preventing oxidation), gas regulator settings (CFH, PSI), nozzle aiming, and gas activation for general laser systems.</li>
                                <li class="ml-4">Laser Engine & Optical Rail: Overview of laser engine (1064nm, fiber optic cable) and optical rail components (Collimator, Shutter, Beam Expander, Beam Bender, Beam Waist concept) applicable to relevant laser types.</li>
                                <li>Nd:YAG Specifics: Introduction to flashlamps, cooling systems, and optical components unique to Nd:YAG lasers.</li>
                            </ul>
                        `
                    },
                    {
                        id: 'module3',
                        title: 'Weld Chamber/System Overview & Basic Alignment',
                        details: `
                            <p class="mb-4">This module focuses on familiarizing you with the laser weld chamber/system and the critical steps for basic alignment to ensure precise laser operation for all types.</p>
                            <h4 class="font-semibold mt-4 mb-2">Details:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li class="ml-4">Weld Chamber/System Overview: Familiarization with internal components (LED lights, fan filter, Argon nozzle, dimmer) for general laser systems.</li>
                                <li class="ml-4">Crosshair Alignment: Procedure for aligning the crosshair with the weld spot, applicable to both Fiber and Nd:YAG.</li>
                                <li class="ml-4">Camera Setup: Steps for configuring the machine's camera for visual focus.</li>
                            </ul>
                        `
                    },
                    {
                        id: 'module4',
                        title: 'Laser Parameters & Weld Characteristics',
                        details: `
                            <p class="mb-4">This module provides an in-depth understanding of how various laser parameters influence the characteristics of a weld for both Fiber and Nd:YAG lasers.</p>
                            <h4 class="font-semibold mt-4 mb-2">Details:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li>Anatomy of a Weld: Exploring the Gaseous, Liquid, and Heat Affected Zone (HAZ).</li>
                                <li>Detailed Laser Parameters: In-depth look at Energy, Pulse Width, Frequency, Beam Diameter, Burst Mode, and the various Pulse Shapes (P3) applicable to both laser types.</li>
                                <li>How Parameters Affect Welds: Visualizing and discussing the impact of parameter changes on weld outcomes for general laser systems.</li>
                            </ul>
                        `
                    },
                    {
                        id: 'module5',
                        title: 'Weld Types & Optimizing Welds',
                        details: `
                            <p class="mb-4">This module explores different types of welds and techniques to optimize weld quality for various laser applications.</p>
                            <h4 class="font-semibold mt-4 mb-2">Details:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li>Keyhole Weld: Deep, narrow, robust weld created by high power density. Ideal for strong, complete joints.</li>
                                <li>Cold Weld (Smoothing/Hammering): Shallow, wide weld from a spread-out beam. Excellent for surface finishing.</li>
                                <li>Holes/Pits: Undesirable cavities caused by excessive power concentration. Indicates parameters need adjustment.</li>
                                <li>Weld Overlap & Weld Beads: Goals for regular and hermetically sealed welds, and the Overlap formula (Frequency / Speed).</li>
                            </ul>
                        `
                    },
                    {
                        id: 'module6',
                        title: 'Control Software & Programming',
                        details: `
                            <p class="mb-4">This module introduces control software like MotionFX and G-Code programming for multi-axis systems, applicable to relevant laser types.</p>
                            <h4 class="font-semibold mt-4 mb-2">Details:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li>Introduction to MotionFX & G-Code: Multi-axis control and programming fundamentals (Absolute vs. Relative Coordinates).</li>
                                <li>MotionFX Menu Selection & Jog Traditional: Overview of menus (Jog Traditional, Main, Auto-Feed Jog, Create Shapes, Edit Programs, Teach Mode) and manual jogging.</li>
                                <li>Creating/Editing Shapes with G-Code: Generating G-code for shapes within MotionFX.</li>
                            </ul>
                        `
                    },
                    {
                        id: 'module7',
                        title: 'Maintenance & Troubleshooting',
                        details: `
                            <p class="mb-4">This module covers essential preventative maintenance and basic troubleshooting common to both Fiber and Nd:YAG lasers.</p>
                            <h4 class="font-semibold mt-4 mb-2">Details:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li>Daily: Cleaning cabinet surfaces, protective windows, and protective discs.</li>
                                <li>Weekly: Checking crosshair alignment and splash protector.</li>
                                <li>Monthly: Replacing air filters, inspecting laser for damage, cleaning heat exchanger, checking water level (Nd:YAG specific), checking laser energy (Nd:YAG specific).</li>
                                <li>Quarterly: Changing de-ionized/distilled water (Nd:YAG specific).</li>
                                <li>Every Six Months: Changing water filter (Nd:YAG specific).</li>
                            </ul>
                        `
                    }
                ]
            },
            fundamentals: {
                title: 'Laser Theory & Safety',
                content: `
                    <div>
                        <h2 class="text-2xl font-bold mb-6 text-red-600">Laser Fundamentals</h2>
                        <p class="mb-6 text-gray-700">Understanding the core principles of laser operation is the first step to mastering your equipment. A laser produces a highly concentrated beam of light through a process of Light Amplification by the Stimulated Emission of Radiation (LASER).</p>
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjRNY4AIozUQ8nYx8WC5sIwJ911oEsfHinwNriqs2L6l8Hzdt2gl-vAfXkMFScJL2MCY2F6EwYF0ivHv2k3MdjYUCjC9z1Dl2-cM-ydgW2XDX4EDy0khqxLQz87gF9DT63pzcjmP9GNSQ/s1600/eye-img3.gif" alt="Laser Fundamentals Diagram" class="mx-auto my-4 rounded-lg shadow-md w-full max-w-sm border border-black">
                        <h2 class="text-2xl font-bold mb-6 text-red-600">Laser Parameters</h2>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                            <button data-param="energy" class="param-btn text-center p-4 bg-white rounded-lg shadow hover:shadow-lg hover:bg-red-50 transition">
                                <h3 class="font-semibold text-gray-900">Energy (J)</h3>
                                <p class="text-sm text-gray-700">Amount of total light emitted.</p>
                            </button>
                            <button data-param="pulse_width" class="param-btn text-center p-4 bg-white rounded-lg shadow hover:shadow-lg hover:bg-red-50 transition">
                                <h3 class="font-semibold text-gray-900">Pulse Width (ms)</h3>
                                <p class="text-sm text-gray-700">The duration the laser is "ON".</p>
                            </button>
                            <button data-param="frequency" class="param-btn text-center p-4 bg-white rounded-lg shadow hover:shadow-lg hover:bg-red-50 transition">
                                <h3 class="font-semibold text-gray-900">Frequency (Hz)</h3>
                                <p class="text-sm text-gray-700">How rapidly laser fires.</p>
                            </button>
                            <button data-param="peak_power" class="param-btn text-center p-4 bg-white rounded-lg shadow hover:shadow-lg hover:bg-red-50 transition">
                                <h3 class="font-semibold text-gray-900">Peak Power</h3>
                                <p class="text-sm text-gray-700">Instantaneous heating; gives penetration.</p>
                            </button>
                            <button data-param="average_power" class="param-btn text-center p-4 bg-white rounded-lg shadow hover:shadow-lg hover:bg-red-50 transition">
                                <h3 class="font-semibold text-gray-900">Average Power</h3>
                                <p class="text-sm text-gray-700">Average heating; affects melt pool.</p>
                            </button>
                            <button data-param="burst" class="param-btn text-center p-4 bg-white rounded-lg shadow hover:shadow-lg hover:bg-red-50 transition">
                                <h3 class="font-semibold text-gray-900">Burst Mode</h3>
                                <p class="text-sm text-gray-700">Limits max # of shots back-to-back.</p>
                            </button>
                        </div>
                        <img src="https://ik.imagekit.io/usaxffqiz/Laser%20Fundamentals.jpg?updatedAt=1749830171063" alt="Laser Parameters Diagram" class="mx-auto my-4 rounded-lg shadow-md w-full max-w-sm border border-black">
                        <h2 class="text-2xl font-bold mb-6 text-red-600">Laser Safety: Class 4 System</h2>
                        <p class="mb-6 text-gray-700">Your laser is a Class 4 system, the highest and most hazardous class. Direct or scattered radiation is dangerous to the eyes and skin. Adherence to safety protocols is mandatory.</p>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Required Eye Protection</h3>
                                <p class="text-gray-700">Safety goggles with an Optical Density (OD) of >6.5 for the 1064nm wavelength are required if operating the laser with the chamber open.</p>
                                <img src="https://bescutter.com/cdn/shop/products/Absorbing-Laser-Safety-Glasses1.png?v=1613234026" alt="Laser Safety Glasses" class="mx-auto my-4 rounded-lg shadow-md w-full max-w-xs border border-black">
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Remote Interlock</h3>
                                <p class="text-gray-700">This crucial safety feature prevents the laser from firing when a designated door is open, preventing accidental exposure to anyone outside the immediate work area.</p>
                                <img src="https://www.amdlasers.com/cdn/shop/products/STIL012_webLG.png?v=1735834199" alt="Remote Interlock Device" class="mx-auto my-4 rounded-lg shadow-md w-full max-w-xs border border-black">
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">View Shutter & Safety Glass</h3>
                                <p class="text-gray-700">The internal view shutter blocks the laser beam from your eyes during the pulse, while the specialized safety glass in the chamber absorbs the vast majority of laser light.</p>
                                <img src="https://ik.imagekit.io/usaxffqiz/View%20Shutter%20and%20Safety%20Glass.jpg?updatedAt=1749830171010" alt="View Shutter and Safety Glass" class="mx-auto my-4 rounded-lg shadow-md w-full max-w-xs border border-black">
                            </div>
                        </div>
                    </div>
                `
            },
            machine: {
                title: 'Machine Tour & Setup',
                content: `
                    <div>
                        <h2 class="text-2xl font-bold mb-6 text-red-600">Initial Setup Procedures</h2>
                        <p class="mb-6 text-gray-700">Follow these procedures to correctly start and prepare your laser welder for operation. Each step is crucial for safety and performance.</p>
                        <div class="space-y-8">
                             <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-xl mb-3 text-red-600">Power-Up Procedure</h3>
                                <ol class="list-disc list-inside space-y-2 text-gray-700">
                                    <li>If applicable, ensure the MotionFX Box is powered on.</li>
                                    <li>Flip the main power (red switch) to the ON position.</li>
                                    <li>Turn the key immediately after flipping the main switch. The system will now boot up.</li>
                                </ol>
                                <img src="https://ik.imagekit.io/usaxffqiz/Power%20Up%20Procedure.jpg?updatedAt=1749830170972" alt="Power Up Procedure Diagram" class="w-full aspect-square max-w-[180px] mx-auto rounded-lg shadow-md border border-black">
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-xl mb-3 text-red-600">Inert Gas (Argon) Setup</h3>
                                <p class="mb-4 text-gray-700">Argon gas is used to shield the weld pool from oxygen, preventing oxidation and ensuring a clean, strong weld.</p>
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                    <li>Set the Argon flow rate on the regulator to approximately 30 CFH (Cubic Feet per Hour).</li>
                                    <li>Aim the gas nozzle at a ~45° angle, about 1 inch from the material surface for optimal coverage.</li>
                                    <li>The gas will activate automatically on the first press of the footswitch.</li>
                                </ul>
                                <img src="https://m.media-amazon.com/images/I/51Ejqq9ZnHL.jpg" alt="Argon Gas Regulator" class="w-full aspect-square max-w-[180px] mx-auto rounded-lg shadow-md border border-black">
                            </div>
                             <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-xl mb-3 text-red-600">Crosshair & Camera Alignment</h3>
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                     <li><strong>Crosshair:</strong> The crosshair in your microscope must be perfectly aligned with the center of the laser spot. Fire a test shot on a scrap piece, then use the 2mm adjustment wrench to center the crosshair on the weld spot. Repeat until perfectly aligned.</li>
                                     <li><strong>Camera:</strong> To align the camera view, place a flat surface in focus. Unscrew the c-mount, adjust the focus knob until the camera view is sharp, then lock the c-mount back in place.</li>
                                </ul>
                                <img src="https://ik.imagekit.io/usaxffqiz/Crosshair%20and%20Camera%20Alignment.jpg?updatedAt=1749830171059" alt="Crosshair and Camera Alignment" class="w-full aspect-square max-w-[200px] mx-auto rounded-lg shadow-md border border-black">
                            </div>
                        </div>
                         <h2 class="text-2xl font-bold mt-12 mb-6 text-red-600">Key Components Overview</h2>
                         <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Laser Engine & Fiber Optic Cable</h3>
                                <p class="text-gray-700">The engine generates light at 1064nm, which is amplified and transported to the optical rail via a specialized fiber optic cable.</p>
                                <img src="https://laserstar.net/wp-content/uploads/2024/10/FiberEngine-WebReady-FiberEngine-Left.png" alt="Laser Engine and Fiber Optic Cable" class="w-full aspect-square max-w-sm mx-auto rounded-lg shadow-md border border-black">
                            </div>
                             <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Optical Rail</h3>
                                <p class="text-gray-700">This assembly shapes and directs the laser beam. It includes the collimator (makes light parallel), shutter (blocks beam), beam expander (controls diameter), and beam bender (directs beam down).</p>
                                <img src="https://ik.imagekit.io/usaxffqiz/Optical%20Rail.jpg?updatedAt=1749830170981" alt="Optical Rail Diagram" class="w-full aspect-square max-w-sm mx-auto rounded-lg shadow-md border border-black">
                            </div>
                         </div>
                    </div>
                `
            },
            fiber_lab: { // New tab for Fiber Lab
                title: 'Interactive Fiber Lab',
                content: `
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <p class="text-center mb-8 text-gray-700">Explore how changing laser parameters affects the final weld for Fiber Lasers. Adjust the sliders to see how the weld profile changes in real time.</p>
                        <div class="grid lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-1 bg-white p-6 rounded-lg shadow space-y-6">
                                <div>
                                    <label for="fiber-energy-slider" class="font-medium text-gray-900">Energy (Joules): <span id="fiber-energy-value">5</span> J</label>
                                    <input id="fiber-energy-slider" type="range" min="1" max="50" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600">
                                </div>
                                <div>
                                    <label for="fiber-pulse-width-slider" class="font-medium text-gray-900">Pulse Width (ms): <span id="fiber-pulse-width-value">5</span> ms</label>
                                    <input id="fiber-pulse-width-slider" type="range" min="1" max="20" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600">
                                </div>
                                <div>
                                    <label for="fiber-beam-diameter-slider" class="font-medium text-gray-900">Beam Diameter (Steps): <span id="fiber-beam-diameter-value">0</span> Steps</label>
                                    <input id="fiber-beam-diameter-slider" type="range" min="0" max="80" value="0" step="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600">
                                </div>
                                <div class="text-sm text-gray-700 border-t pt-4">
                                    <p><strong class="text-gray-900">Higher Energy:</strong> Increases depth and width.</p>
                                    <p><strong class="text-gray-900">Longer Pulse Width:</strong> Increases heat input, creating a wider, more fluid weld.</p>
                                    <p><strong class="text-gray-900">Larger Beam Diameter:</strong> Spreads energy out, reducing penetration but creating a wider, smoother surface finish.</p>
                                </div>
                            </div>
                            <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-xl mb-4 text-red-600">Estimated Weld Geometry (Fiber)</h3>
                                <p class="text-sm text-gray-700 mb-4">Note: This is just a graphical tool. Results vary depending on material, finish, and model number.</p>
                                <div class="chart-container flex justify-center items-center pb-12">
                                    <canvas id="fiberWeldProfileCanvas" style="display: block;"></canvas>
                                    <div class="axis-label-x">Weld Width</div>
                                    <div class="axis-label-y">Weld Penetration</div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-12 grid md:grid-cols-2 gap-8 items-start">
                             <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-xl mb-4 text-red-600">Pulse Shape (P3)</h3>
                                <p class="text-sm mb-4 text-gray-700">Control how energy is delivered within a single pulse for specialized applications.</p>
                                <select id="fiber-pulse-shape-select" class="w-full p-2 border border-gray-300 rounded-md text-gray-800">
                                    <option value="basic">Basic Profile</option>
                                    <option value="spike">Spike Profile</option>
                                    <option value="rampup">Ramp Up Profile</option>
                                    <option value="burst">Burst Profile</option>
                                </select>
                                <p id="fiber-pulse-shape-description" class="mt-4 text-sm text-gray-700"></p>
                             </div>
                             <div class="bg-white p-6 rounded-lg shadow">
                                <div class="chart-container" style="height:250px; max-height:250px;">
                                    <canvas id="fiberPulseShapeChart"></canvas>
                                </div>
                             </div>
                        </div>

                        <div class="mt-12 bg-white p-6 rounded-lg shadow">
                            <h3 class="font-semibold text-xl mb-4 text-red-600">Weld Types & Techniques</h3>
                             <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm">
                                <div class="border border-gray-200 p-4 rounded-md">
                                    <h4 class="font-semibold mb-1 text-gray-900">Keyhole Weld</h4>
                                    <p class="text-gray-700">A deep, narrow, robust weld created by high power density. Ideal for strong, complete joints.</p>
                                </div>
                                <div class="border border-gray-200 p-4 rounded-md">
                                    <h4 class="font-semibold mb-1 text-gray-900">Cold Weld (Smoothing)</h4>
                                    <p class="text-gray-700">A shallow, wide weld from a spread-out beam. Excellent for surface finishing, also called "Hammering".</p>
                                </div>
                                <div class="border border-gray-200 p-4 rounded-md">
                                    <h4 class="font-semibold mb-1 text-gray-900">Holes / Pits</h4>
                                    <p class="text-gray-700">Undesirable cavities caused by excessive power concentration. Indicates parameters need adjustment.</p>
                                </div>
                             </div>
                        </div>
                        <h2 class="text-2xl font-bold mt-12 mb-6 text-red-600">Key Components Overview</h2>
                         <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Power-Up Procedure</h3>
                                <ol class="list-disc list-inside space-y-2 text-gray-700">
                                    <li>If applicable, ensure the MotionFX Box is powered on.</li>
                                    <li>Flip the main power (red switch) to the ON position.</li>
                                    <li>Turn the key immediately after flipping the main switch. The system will now boot up.</li>
                                </ol>
                                <img src="https://ik.imagekit.io/usaxffqiz/Power%20Up%20Procedure.jpg?updatedAt=1749830170972" alt="Power Up Procedure Diagram" class="w-full aspect-square max-w-[180px] mx-auto rounded-lg shadow-md border border-black">
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Inert Gas (Argon) Setup</h3>
                                <p class="mb-4 text-gray-700">Argon gas is used to shield the weld pool from oxygen, preventing oxidation and ensuring a clean, strong weld.</p>
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                    <li>Set the Argon flow rate on the regulator to approximately 30 CFH (Cubic Feet per Hour).</li>
                                    <li>Aim the gas nozzle at a ~45° angle, about 1 inch from the material surface for optimal coverage.</li>
                                    <li>The gas will activate automatically on the first press of the footswitch.</li>
                                </ul>
                                <img src="https://m.media-amazon.com/images/I/51Ejqq9ZnHL.jpg" alt="Argon Gas Regulator" class="w-full aspect-square max-w-[180px] mx-auto rounded-lg shadow-md border border-black">
                            </div>
                             <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Crosshair & Camera Alignment</h3>
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                     <li><strong>Crosshair:</strong> The crosshair in your microscope must be perfectly aligned with the center of the laser spot. Fire a test shot on a scrap piece, then use the 2mm adjustment wrench to center the crosshair on the weld spot. Repeat until perfectly aligned.</li>
                                     <li><strong>Camera:</strong> To align the camera view, place a flat surface in focus. Unscrew the c-mount, adjust the focus knob until the camera view is sharp, then lock the c-mount back in place.</li>
                                </ul>
                                <img src="https://ik.imagekit.io/usaxffqiz/Crosshair%20and%20Camera%20Alignment.jpg?updatedAt=1749830171059" alt="Crosshair and Camera Alignment" class="w-full aspect-square max-w-[200px] mx-auto rounded-lg shadow-md border border-black">
                            </div>
                        </div>
                         <h2 class="text-2xl font-bold mt-12 mb-6 text-red-600">Laser Engine & Optical Rail</h2>
                         <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Laser Engine & Fiber Optic Cable</h3>
                                <p class="text-gray-700">The engine generates light at 1064nm, which is amplified and transported to the optical rail via a specialized fiber optic cable.</p>
                                <img src="https://laserstar.net/wp-content/uploads/2024/10/FiberEngine-WebReady-FiberEngine-Left.png" alt="Laser Engine and Fiber Optic Cable" class="w-full aspect-square max-w-sm mx-auto rounded-lg shadow-md border border-black">
                            </div>
                             <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-lg mb-2 text-red-600">Optical Rail</h3>
                                <p class="text-gray-700">This assembly shapes and directs the laser beam. It includes the collimator (makes light parallel), shutter (blocks beam), beam expander (controls diameter), and beam bender (directs beam down).</p>
                                <img src="https://ik.imagekit.io/usaxffqiz/Optical%20Rail.jpg?updatedAt=1749830170981" alt="Optical Rail Diagram" class="w-full aspect-square max-w-sm mx-auto rounded-lg shadow-md border border-black">
                            </div>
                         </div>
                    </div>
                `
            },
            flashlamp_lab: { // New tab for Flashlamp Lab
                title: 'Interactive Flashlamp Lab',
                content: `
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <p class="text-center mb-8 text-gray-700">Explore how changing laser parameters affects the final weld for Flashlamp Lasers. Adjust the sliders to see how the weld profile changes in real time.</p>
                        <div class="grid lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-1 bg-white p-6 rounded-lg shadow space-y-6">
                                <div>
                                    <label for="flashlamp-volts-slider" class="font-medium text-gray-900">Volts (V): <span id="flashlamp-volts-value">250</span> V</label>
                                    <input id="flashlamp-volts-slider" type="range" min="155" max="405" value="250" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600">
                                </div>
                                <div>
                                    <label for="flashlamp-pulse-width-slider" class="font-medium text-gray-900">Pulse Width (ms): <span id="flashlamp-pulse-width-value">5</span> ms</label>
                                    <input id="flashlamp-pulse-width-slider" type="range" min="1" max="20" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600">
                                </div>
                                <div>
                                    <label for="flashlamp-beam-diameter-mm-slider" class="font-medium text-gray-900">Beam Diameter (mm): <span id="flashlamp-beam-diameter-mm-value">1.0</span> mm</label>
                                    <input id="flashlamp-beam-diameter-mm-slider" type="range" min="0.2" max="2.0" value="1.0" step="0.1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600">
                                </div>
                                <div class="text-sm text-gray-700 border-t pt-4">
                                    <p><strong class="text-gray-900">Higher Volts:</strong> Increases depth and width.</p>
                                    <p><strong class="text-gray-900">Longer Pulse Width:</strong> Increases heat input, creating a wider, more fluid weld.</p>
                                    <p><strong class="text-gray-900">Larger Beam Diameter:</strong> Spreads energy out, reducing penetration but creating a wider, smoother surface finish.</p>
                                </div>
                            </div>
                            <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-xl mb-4 text-red-600">Estimated Weld Geometry (Flashlamp)</h3>
                                <p class="text-sm text-gray-700 mb-4">Note: This is just a graphical tool. Results vary depending on material, finish, and model number.</p>
                                <div class="chart-container flex justify-center items-center pb-12">
                                    <canvas id="flashlampWeldProfileCanvas" style="display: block;"></canvas>
                                    <div class="axis-label-x">Weld Width</div>
                                    <div class="axis-label-y">Weld Penetration</div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-12 grid md:grid-cols-2 gap-8 items-start">
                             <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="font-semibold text-xl mb-4 text-red-600">Pulse Shape (P3)</h3>
                                <p class="text-sm mb-4 text-gray-700">Control how energy is delivered within a single pulse for specialized applications.</p>
                                <select id="flashlamp-pulse-shape-select" class="w-full p-2 border border-gray-300 rounded-md text-gray-800">
                                    <option value="basic">Basic Profile</option>
                                    <option value="spike">Spike Profile</option>
                                    <option value="rampdown">Ramp Down Profile</option>
                                    <option value="pyramid">Pyramid Profile</option>
                                    <option value="rampup">Ramp Up Profile</option>
                                    <option value="prepulsed">Pre Pulse Profile</option>
                                    <option value="burst">Burst Profile</option>
                                </select>
                                <p id="flashlamp-pulse-shape-description" class="mt-4 text-sm text-gray-700"></p>
                             </div>
                             <div class="bg-white p-6 rounded-lg shadow">
                                <div class="chart-container" style="height:250px; max-height:250px;">
                                    <canvas id="flashlampPulseShapeChart"></canvas>
                                </div>
                             </div>
                        </div>

                        <div class="mt-12 bg-white p-6 rounded-lg shadow">
                            <h3 class="font-semibold text-xl mb-4 text-red-600">Weld Types & Techniques</h3>
                             <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm">
                                <div class="border border-gray-200 p-4 rounded-md">
                                    <h4 class="font-semibold mb-1 text-gray-900">Keyhole Weld</h4>
                                    <p class="text-gray-700">A deep, narrow, robust weld created by high power density. Ideal for strong, complete joints.</p>
                                </div>
                                <div class="border border-gray-200 p-4 rounded-md">
                                    <h4 class="font-semibold mb-1 text-gray-900">Cold Weld (Smoothing)</h4>
                                    <p class="text-gray-700">A shallow, wide weld from a spread-out beam. Excellent for surface finishing, also called "Hammering".</p>
                                </div>
                                <div class="border border-gray-200 p-4 rounded-md">
                                    <h4 class="font-semibold mb-1 text-gray-900">Holes / Pits</h4>
                                    <p class="text-gray-700">Undesirable cavities caused by excessive power concentration. Indicates parameters need adjustment.</p>
                                </div>
                             </div>
                        </div>
                    </div>
                `
            },
            motionfx: {
                title: 'MotionFX & G-Code',
                content: `
                    <div>
                        <p class="mb-6 text-gray-700">MotionFX is the software that controls the multi-axis movement of your laser system. It operates using G-Code, a standard language for numerical control programming.</p>
                        <img src="https://ik.imagekit.io/usaxffqiz/MFX.jpg?updatedAt=1749837358956" alt="MotionFX Software Interface" class="mx-auto my-6 rounded-lg shadow-md">
                        <div class="bg-white p-6 rounded-lg shadow mb-8">
                            <h3 class="font-semibold text-xl mb-4 text-red-600">Crucial Concept: Absolute vs. Relative Coordinates</h3>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <h4 class="font-semibold text-gray-900">G90 - Absolute Coordinates</h4>
                                    <p class="text-sm text-gray-700">All coordinates are measured from a fixed origin point (0,0). <br> A command to move to X10 will always go to the position X10.</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">G91 - Relative Coordinates</h4>
                                    <p class="text-sm text-gray-700">All coordinates are measured from the laser's current position. <br>A command to move X10 will move 10 units in X from where it is now.</p>
                                </div>
                            </div>
                        </div>

                        <h3 class="text-xl font-bold mb-4 text-red-600">Common G-Code Commands</h3>
                        <div id="gcode-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
                    </div>
                `
            },
            maintenance: {
                title: 'Preventative Maintenance Schedule',
                content: `
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <p class="mb-8 text-gray-700">Regular preventative maintenance is crucial for ensuring the longevity and performance of your laser. The requirements depend on the specific type of laser, with flashlamp systems requiring more regular attention than fibers.</p>
                        
                        <h2 class="text-2xl font-bold mb-4 text-red-600">Preventative Maintenance: Fiber Lasers</h2>
                        <div class="space-y-4 mb-8">
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Recommended On-Hand Consumable Parts
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Protective discs</li>
                                        <li>Cabinet air filters (model-dependent)</li>
                                        <li>Exhaust filters (model-dependent)</li>
                                        <li>LaserStar® preferred cleaning solution</li>
                                        <li>LaserStar® preferred wipes (various quantities)</li>
                                        <li>Window cleaner</li>
                                        <li>Paper towels or clean shop towels</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Daily Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Clean surfaces: Clean the cabinet surface with a damp cloth or glass cleaner. Never use strong cleaning agents (e.g., powders or solvents).</li>
                                        <li>Check protective window: Visually check the laser protective window for cracks, voids, or other damage. If damaged, the laser must not be used until replaced. (Refer to section “Replacement of the Splash Protective Window and Laser Protective Window” in your manual for details, if model-dependent).</li>
                                        <li>Clean protective disc: Unscrew the protective disc from the focusing lens within the welding chamber/area and clean it with a lens cleaning solution. The recommended solvent is Isopropyl Alcohol-70% (flammable) or LaserStar® preferred cleaning solution & LaserStar® preferred wipes.</li>
                                        <li class="ml-4">Note: Metal splashes will adhere to the protective disc, requiring replacement. There is a danger of local heating at these splash points on the protective disc that may result in possible cracking or destroying of the focus lens. Never install a protective disc with metal splashes facing up.</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Weekly Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Check alignment: Check the alignment of the crosshair to the laser spot. Refer to the "Stereo Microscope Mounting and Alignment" section in your manual for a step-by-step procedure.</li>
                                        <li>Check splash protector: Clean and check the plastic splash protector behind the laser protective window for scratches, cracks, or holes.</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Monthly Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Replace air filters: Check and replace the laser filters (side panel filters, if model-dependent) as required or if dirty.</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Quarterly Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Perform all the above maintenance tasks.</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Yearly Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Perform all the above maintenance tasks.</li>
                                        <li>Check and replace the blue filters on the main laser body.</li>
                                        <li>If dust collects on the optical rail, use optical-grade compressed air (no bitterants).</li>
                                        <li>The controller board battery may need replacement every 2-3 years.</li>
                                        <li>The protective disc is disposable and should be replaced when it can no longer be cleaned effectively.</li>
                                    </ul>
                                </div>
                            </details>
                        </div>

                        <h2 class="text-2xl font-bold mb-4 mt-8 text-red-600">Preventative Maintenance: Nd YAG Lasers</h2>
                        <div class="space-y-4">
                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Recommended On-Hand Consumable Parts
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Protective Discs</li>
                                        <li>Cabinet Air Filters (model-dependent)</li>
                                        <li>Exhaust Filter (model-dependent)</li>
                                        <li>LaserStar® preferred cleaning solution</li>
                                        <li>LaserStar® preferred wipes (quantity 1 or 90)</li>
                                        <li>De-ionized Water (model-dependent)</li>
                                        <li>Distilled Water (model-dependent)</li>
                                        <li>Water Filter (model-dependent)</li>
                                        <li>Flashlamp (model-dependent)</li>
                                        <li>Window Cleaner</li>
                                        <li>Paper towels or clean shop towels</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Daily Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Clean the cabinet: The cabinet surface should be cleaned with a damp cloth or glass cleaner. Never use strong cleaning agents (e.g., powders or solvents).</li>
                                        <li>Clean the window: The laser protective window should be visually checked for cracks, voids, or other damage. If damaged, the laser must not be used until replaced. Refer to "Replacement of the Splash Protective Window and Laser Protective Window" later in this section.</li>
                                        <li>Clean the protective disc: The protective disc, located inside the welding chamber/area, should be unscrewed from the focusing lens and cleaned with a lens cleaning solution. The preferred cleaning solution is LaserStar® cleaning solution. The preferred wipes are LaserStar® wipes. (Note: Isopropyl Alcohol-70% (flammable) can be used with a lint-free wipe. After cleaning the lens, use a clean, lint-free wipe to remove any haze.)</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Weekly Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Check the scope alignment: Check the alignment of the crosshair to the laser spot. For a step-by-step procedure on alignment refer to the "Microscope Mounting and Alignment" section in this Manual.</li>
                                        <li>Check the splash protector: The plastic splash protector behind the laser protective window should be cleaned and checked for scratches, cracks, or holes.</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Monthly Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Inspect the entire laser: Inspect the welding chamber/area protective housings (model-dependent), e.g., arm cuffs, chamber/area door and cuff for damage. The laser must not be used if any protective housings (model-dependent) are damaged. Contact LaserStar® Technologies Corporation for Service.</li>
                                        <li>Clean the heat exchanger: Vacuum clean the heat exchanger fins using a plastic nozzle. Caution!! The fins on the heat exchanger are sharp; be careful not to damage them.</li>
                                        <li>Check the water level: Check the de-ionized water or distilled water level (model-dependent) in the water bottle located on the left side of the enclosure by removing the left side panel. (Reference section IX / Service A / A. Refilling & Topping Off the DI Water Bottle).</li>
                                        <li>Check air filters: Check and replace all laser cabinet air filters if dirty.</li>
                                        <li>Check the laser energy: Check the laser’s energy as follows:
                                            <ul class="list-disc list-inside ml-8">
                                                <li>Set parameters at: 250 V, 1MS, 0.0Hz, 0,20mm Beam Diameter.</li>
                                                <li>Position the “Flash Paper,” supplied, at the bottom of the welding chamber/area and fire a single laser pulse.</li>
                                                <li>Compare the spot to the samples provided at installation. If not similar, contact LaserStar® Technical Service Department.</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Quarterly Maintenance
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Change the water: Change the de-ionized or distilled water (model-dependent) every three months.</li>
                                        <li>Perform all the above maintenance tasks.</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="group bg-gray-50 p-4 rounded-lg shadow-sm cursor-pointer">
                                <summary class="font-semibold text-gray-900 list-none flex justify-between items-center">
                                    Every (Six Months)
                                    <span class="group-open:rotate-180 transition-transform">&#9660;</span>
                                </summary>
                                <div class="mt-4 text-gray-700">
                                    <ul class="list-disc list-inside space-y-1 pl-4">
                                        <li>Change the water filter: Change the de-ionized or distilled water filter (model-dependent) every 6 months depending on use of laser.</li>
                                    </ul>
                                </div>
                            </details>
                        </div>
                    </div>
                `
            },
            files: {
                title: 'Training Files & Resources',
                content: `
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <h2 class="text-2xl font-bold mb-6 text-red-600">Presentations</h2>
                        <p class="mb-4 text-gray-700">Download the presentation materials for your reference.</p>
                        <div class="space-y-3 mb-10">
                            <a href="https://ik.imagekit.io/usaxffqiz/Fiber%20Laser%20Presentation.pdf?updatedAt=1749840272241" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Fiber Laser Presentation (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/Nd_YAG%20Laser%20Presentation.pptx.pdf?updatedAt=1749840272853" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Nd_YAG Laser Presentation (PDF)
                            </a>
                        </div>

                        <h2 class="text-2xl font-bold mb-6 text-red-600">Print for In-Person Training</h2>
                        <p class="mb-4 text-gray-700">These documents are recommended for printing and use during hands-on training sessions.</p>
                        <div class="space-y-3 mb-10">
                            <a href="https://ik.imagekit.io/usaxffqiz/Fiber%20Laser%20-%20Preventative%20Maintenance.pdf?updatedAt=1749840271946" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Fiber Laser - Preventative Maintenance (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/Delivery%20&%20Acceptance%20(Customize%20for%20each%20customer).doc?updatedAt=1749840272100" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Delivery & Acceptance (DOC)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/P-3.pdf?updatedAt=1749840271782" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: P-3 (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/MFX.pdf?updatedAt=1749840271448" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: MFX (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/B.E.%20Illustrations.pdf?updatedAt=1749840270939" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: B.E. Illustrations (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/PREVENTATIVE%20MAINTENANCE.pdf?updatedAt=1749834825825" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Preventative Maintenance (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/Fiber%20Laser%20Training%20Worksheet.pdf?updatedAt=1749840270569" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Fiber Laser Training Worksheet (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/G%20Code%20Commands.pdf?updatedAt=1749840270559" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: G-Code Commands (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/Training%20Check%20List.pdf?updatedAt=1749840270471" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Training Check List (PDF)
                            </a>
                        </div>
                        <h2 class="text-2xl font-bold mb-6 mt-10 text-red-600">Pre-Training Email</h2>
                        <p class="mb-4 text-gray-700">Use this template to send email to customers the week prior to training.</p>
                        <div class="space-y-3">
                            <a href="https://docs.google.com/document/d/1vJDeSfoEKAQwYnpPy6RHed7P0G-nylVz/edit?usp=sharing&ouid=115756580806327685096&rtpof=true&sd=true" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Pre-Training Email (Google Doc)
                            </a>
                        </div>
                    </div>
                `
            },
            pre_training_email: { // New tab content for Pre-Training Email
                title: 'Pre-Training Email',
                content: `
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <h2 class="text-2xl font-bold mb-6 text-red-600">Pre-Training Email Template</h2>
                        <p class="mb-4 text-gray-700">Use this template to send email to customers the week prior to training.</p>
                        
                        <div class="mb-6 space-y-3">
                            <a href="https://ik.imagekit.io/usaxffqiz/Fiber%20Laser%20Training%20Worksheet.pdf?updatedAt=1749840270569" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Training Check List - Fiber (PDF)
                            </a>
                            <a href="https://ik.imagekit.io/usaxffqiz/Nd%20YAG%20Laser%20Training%20Worksheet.pdf?updatedAt=1750336128106" target="_blank" class="block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out">
                                Download: Training Check List - Flashlamp (PDF)
                            </a>
                        </div>

                        <div class="p-6 border border-gray-200 rounded-lg bg-gray-50 text-gray-800 leading-relaxed whitespace-pre-wrap">
Subject: Upcoming Laser Welding Training – Preparing for Your Session

Body:

Hi [Customer Name],

I'm Nolan McGinley, the Applications Engineer for your laser welding training next week. To make sure the session is as valuable as possible, I'd like to share what a typical training covers and to ask a few questions to help me prepare.

Our standard training, outlined in the attached "training worksheet" document, usually focuses on topics from start-up procedures to laser theory, which typically takes up most of the first day. After that, we'll have ample time for hands-on practice, motion control, and any other specific topics or techniques your team would like to explore. While we're required to cover the items on the list, we'll have plenty of flexibility to focus on your priorities.

To ensure we're on the same page for next week, please answer the following questions:

1. What are your primary goals for this training? Are there specific skills or topics you'd like to emphasize?
2. Will you have parts available for practice welding?
3. How many people will attend the training? If more than one, could you share their experience levels with laser welding?
4. Which training schedule works best for you: 7 AM–2 PM, 8 AM–3 PM, or 9 AM–4 PM?
5. Could you confirm the training address?
6. Do you have any other questions or concerns I can address before the training?

Please reply to this email or call me at 407-720-7613 at your convenience. I look forward to working with you and your team next week!

Sincerely,
                        </div>
                    </div>
                `
            },
            g_codes: [
                { code: 'G90', desc: 'Switch to Absolute Coordinates. All positions reference the program origin (0,0).', syntax_example: 'G90', syntax_description: 'Sets the machine to absolute positioning mode.' },
                { code: 'G91', desc: 'Switch to Relative Coordinates. All positions reference the current location.', syntax_example: 'G91', syntax_description: 'Sets the machine to incremental positioning mode.' },
                { code: 'G0', desc: 'Rapid Move (Laser OFF). Used for positioning the laser head quickly between weld paths.', syntax_example: 'G0 X10.00 Y10', syntax_description: 'Moves the laser to X=10.00, Y=10 without firing.' },
                { code: 'G1', desc: 'Linear Move (Laser ON). Used for creating straight line welds.', syntax_example: 'G1 X10.00 Y10', syntax_description: 'Moves the laser to X=10.00, Y=10 while firing.' },
                { code: 'G2', desc: 'Clockwise Arc. Moves in a clockwise circular path.', syntax_example: 'G2 X10.0 Y10.0 I5.0 J5.0', syntax_description: 'Moves the laser clockwise to X=10.0, Y=10.0 with arc center offset I=5.0, J=5.0 from start point.' },
                { code: 'G3', desc: 'Counter-Clockwise Arc. Moves in a counter-clockwise circular path.', syntax_example: 'G3 X20.0 Y10.0 I10.0 J10.0', syntax_description: 'Moves the laser counter-clockwise to X=20.0, Y=10.0 with arc center offset I=10.0, J=10.0 from start point.' },
                { code: 'I', desc: 'Defines the X-axis distance from the arc start point to the arc center point.', syntax_example: 'G2 X10.0 Y10.0 I5.0 J5.0', syntax_description: 'Used in G2/G3 commands to specify X-offset of arc center.' },
                { code: 'J', desc: 'Defines the Y-axis distance from the arc start point to the arc center point.', syntax_example: 'G2 X10.0 Y10.0 I5.0 J5.0', syntax_description: 'Used in G2/G3 commands to specify Y-offset of arc center.' },
                { code: 'R', desc: 'Defines the rotation angle in degrees for the rotary axis.', syntax_example: 'R90', syntax_description: 'Rotates the rotary axis by 90 degrees (relative mode).' },
                { code: 'POINT', desc: 'Fires the laser for a specified duration (in ms) at a single point.', syntax_example: 'POINT 1000', syntax_description: 'Turns on the laser beam for 1000 milliseconds (1 second).' },
                { code: 'SLEEP', desc: 'Pauses all machine functions for a specified duration (in ms).', syntax_example: 'SLEEP 400', syntax_description: 'Pauses program execution for 400 milliseconds.' },
                { code: 'LOOP', desc: 'Starts a block of code that will be repeated a specified number of times.', syntax_example: 'LOOP 6\n  G0 X10.0 Y10.0\n  G1 X40.0 Y40.0\nENDLOOP', syntax_description: 'Begins a loop that will execute 6 times.' },
                { code: 'END LOOP', desc: 'Marks the end of a LOOP block.', syntax_example: 'ENDLOOP', syntax_description: 'Closes a LOOP block.' },
                { code: 'PAUSE', desc: 'Pauses the program and waits for the operator to press "Resume". Useful for mid-program adjustments or inspections.', syntax_example: 'PAUSE', syntax_description: 'Halts program execution until manually resumed.' },
                { code: 'FR', desc: 'Feed Rate - Sets speed for axis for lasing commands only. Units in mm/s.', syntax_example: 'FR X10 Y10 Z10 R10', syntax_description: 'Sets feed rates for X, Y, Z, and Rotary axes to 10 mm/s.'}
            ],
             parameters: {
                energy: {
                    label: 'Energy (Joule)',
                    description: 'The unit of energy used to describe the amount of light delivered through the laser in a single pulse. Formula: Power (Watts) x Pulse Width (seconds).'
                },
                pulse_width: {
                    label: 'Pulse Width (ms)',
                    description: 'The laser "ON" time. The duration of time that the laser is firing per pulse; measured in milliseconds (ms).'
                },
                frequency: {
                    label: 'Frequency (Hz)',
                    description: 'The number of laser pulses emitted per second; measured in Hertz (Hz). Frequency may also be referred to as repetition rate.'
                },
                peak_power: {
                    label: 'Peak Power',
                    description: 'The rate of energy flow in every pulse. Peak Power is the instantaneous heating and is what gives you penetration. Formula: Energy per pulse (Joule) / pulse width (seconds).'
                },
                average_power: {
                    label: 'Average Power',
                    description: 'The rate of energy flow averaged over one full period. Average Power is the average heating and is what gives you melt pool characteristics. Formula: Energy Per Pulse (Joule) x Frequency (Hz).'
                },
                burst: {
                    label: 'Burst Mode',
                    description: 'Limits the maximum number of shots taken back-to-back.'
                }
            },
             pulse_shapes: {
                basic: {
                    label: 'Basic Profile',
                    data: [100, 100, 100],
                    desc: 'A flat, consistent energy delivery. Ideal for most standard welding applications on materials like Stainless Steel, Platinum, and Yellow Gold.'
                },
                spike: {
                    label: 'Spike Profile',
                    data: [100, 25, 25],
                    desc: 'A high energy spike at the beginning of the pulse helps overcome the high reflectivity of materials like Silver and Copper.'
                },
                rampdown: {
                    label: 'Ramp Down Profile',
                    data: [100, 75, 50],
                    desc: 'Gradually decreases energy to prevent thermal cracking and cratering at the end of a weld, especially on thermally sensitive materials like Silver and Aluminum.'
                },
                pyramid: {
                    label: 'Pyramid Profile',
                    data: [50, 100, 50],
                    desc: 'A peak of energy in the middle of the pulse. Useful for welding Titanium and joining dissimilar materials with different melting points.'
                },
                rampup: {
                    label: 'Ramp Up Profile',
                    data: [50, 75, 100],
                    desc: 'Gradually increases energy. Helpful when welding materials with very low reflectivity or many volatile contaminants/plating, to prevent spatter and ensure consistent coupling. Used with White Gold.'
                },
                prepulsed: {
                    label: 'Pre Pulse Profile',
                    data: [75, 25, 100],
                    desc: 'An initial energy section to vaporize contaminants, followed by a brief delay (simulated as low energy) before the main weld process. Used with Eyeglasses, plated, anodized, painted, or oil-contaminated parts.'
                },
                burst: {
                    label: 'Burst Profile',
                    data: [100, 100, 100],
                    desc: 'Delivers pulse energy in repeated cycles with consistent peak power. Increases weld depth and is beneficial for Pewter, Hollow (thin wall) and Low Melting Pot Metal.'
                }
            }
        };

        let pulseShapeChart; // weldProfileCanvas is now drawn manually

        function initWeldProfileCanvas(canvasId) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');

            // Make canvas fill its container and be responsive
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            // Add resize listener to redraw when container changes size
            window.addEventListener('resize', () => {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                // Determine which update function to call based on canvasId
                if (canvasId === 'fiberWeldProfileCanvas') {
                    updateWeldProfile(canvasId, 'fiber-energy-slider', 'fiber-pulse-width-slider', 'fiber-beam-diameter-slider');
                } else if (canvasId === 'flashlampWeldProfileCanvas') {
                    updateWeldProfile(canvasId, 'flashlamp-volts-slider', 'flashlamp-pulse-width-slider', 'flashlamp-beam-diameter-mm-slider');
                }
            });
            // Initial render
            if (canvasId === 'fiberWeldProfileCanvas') {
                updateWeldProfile(canvasId, 'fiber-energy-slider', 'fiber-pulse-width-slider', 'fiber-beam-diameter-slider');
            } else if (canvasId === 'flashlampWeldProfileCanvas') {
                updateWeldProfile(canvasId, 'flashlamp-volts-slider', 'flashlamp-pulse-width-slider', 'flashlamp-beam-diameter-mm-slider');
            }
        }

        function updateWeldProfile(targetCanvasId, energyInputId, pulseWidthInputId, beamDiameterInputId) {
            const canvas = document.getElementById(targetCanvasId);
            const ctx = canvas.getContext('2d');

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Get current slider values using the provided IDs
            let energyOrVolts = parseFloat(document.getElementById(energyInputId).value);
            const pulseWidth = parseFloat(document.getElementById(pulseWidthInputId).value);
            let beamDiameter = parseFloat(document.getElementById(beamDiameterInputId).value);
            
            // Update displayed values
            document.getElementById(energyInputId.replace('-slider', '-value')).textContent = `${energyOrVolts.toFixed(1)}`;
            document.getElementById(pulseWidthInputId.replace('-slider', '-value')).textContent = `${pulseWidth.toFixed(1)}`;
            document.getElementById(beamDiameterInputId.replace('-slider', '-value')).textContent = `${beamDiameter.toFixed(1)}`;

            // --- Define fixed logical coordinate system for the weld ---
            const fixedLogicalWidth = 40; 
            const fixedLogicalPenetration = 12; 

            // --- Mapping from logical coordinates to canvas pixels ---
            const surfaceY = canvas.height * 0.1;
            const maxCanvasY = canvas.height * 0.9;
            const centerX = canvas.width / 2;
            const xScale = canvas.width / fixedLogicalWidth;
            const yScale = (maxCanvasY - surfaceY) / fixedLogicalPenetration;

            // Adjusted formulas for visual effect and responsiveness
            let penetration;
            let weldWidthLogical;

            // These are simplified equations for visual representation.
            // They don't represent actual physics but aim to show desired trends.
            if (targetCanvasId === 'flashlampWeldProfileCanvas') {
                // Flashlamp specific scaling for volts and beam diameter in mm
                // Dramatically increase width with beam diameter, dramatically decrease penetration
                penetration = Math.max(0.1, (energyOrVolts * 0.03) + (pulseWidth * 0.05) - (Math.pow(beamDiameter, 3) * 0.5)); 
                weldWidthLogical = Math.max(0.5, (beamDiameter * 8) + (pulseWidth * 1.0) + (energyOrVolts * 0.01)); 
            } else {
                // Fiber (or generic) scaling
                penetration = Math.max(0.1, (energyOrVolts * 0.25) + (pulseWidth * 0.15) - (Math.pow(beamDiameter, 2) * 0.0008)); 
                weldWidthLogical = Math.max(0.5, (beamDiameter * 0.2) + (pulseWidth * 0.6) + (energyOrVolts * 0.06)); 
            }
            
            // Ensure penetration does not go below zero if not desired
            penetration = Math.max(0.1, penetration);
            // Ensure weldWidthLogical has a reasonable minimum
            weldWidthLogical = Math.max(0.5, weldWidthLogical);


            // --- Drawing the Fixed Surface ---
            ctx.beginPath();
            ctx.strokeStyle = '#4b5563';
            ctx.lineWidth = 2;
            ctx.moveTo(0, surfaceY);
            ctx.lineTo(canvas.width, surfaceY);
            ctx.stroke();
            ctx.closePath();

            // --- Drawing the Weld Shape ---
            ctx.beginPath();
            ctx.fillStyle = 'rgba(220, 38, 38, 0.5)';
            ctx.strokeStyle = '#dc2626';
            ctx.lineWidth = 2;

            // Points of the weld profile (relative to center X and surface Y)
            const profilePoints = [
                { x_logical: -weldWidthLogical / 2, y_logical: 0 },
                { x_logical: -weldWidthLogical / 3, y_logical: penetration * 0.5 },
                { x_logical: -weldWidthLogical / 6, y_logical: penetration * 0.9 },
                { x_logical: 0, y_logical: penetration },
                { x_logical: weldWidthLogical / 6, y_logical: penetration * 0.9 },
                { x_logical: weldWidthLogical / 3, y_logical: penetration * 0.5 },
                { x_logical: weldWidthLogical / 2, y_logical: 0 }
            ];

            ctx.moveTo(centerX + profilePoints[0].x_logical * xScale, surfaceY + profilePoints[0].y_logical * yScale);

            for (let i = 1; i < profilePoints.length; i++) {
                ctx.lineTo(centerX + profilePoints[i].x_logical * xScale, surfaceY + profilePoints[i].y_logical * yScale);
            }

            ctx.closePath();
            ctx.fill();
            ctx.stroke();
        }


        function initPulseShapeChart(canvasId, selectId, descriptionId) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            let targetChart;
            // Check if a chart already exists for this canvas and destroy it
            if (window[canvasId + 'ChartInstance']) {
                window[canvasId + 'ChartInstance'].destroy();
            }

            targetChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Section 1', 'Section 2', 'Section 3'],
                    datasets: [{
                        label: 'Energy Distribution',
                        backgroundColor: ['#4267B2', '#2A4D8D', '#0A255B'],
                        data: [],
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { callback: value => `${value}%` }
                        }
                    }
                }
            });
            window[canvasId + 'ChartInstance'] = targetChart; // Store instance globally

            // Set initial state based on the select element for this chart
            updatePulseShape(canvasId, selectId, descriptionId);
        }
        
        function updatePulseShape(canvasId, selectId, descriptionId) {
            const chart = window[canvasId + 'ChartInstance'];
            if (!chart) return;

            const selectedShape = document.getElementById(selectId).value;
            const shapeData = appData.pulse_shapes[selectedShape];
            
            chart.data.datasets[0].data = shapeData.data;
            chart.options.plugins.title = { display: true, text: shapeData.label, font: { size: 16, weight: 'bold' }, color: '#333' };
            chart.update();
            
            document.getElementById(descriptionId).textContent = shapeData.desc;
        }

        function renderGCodeGrid() {
            const grid = document.getElementById('gcode-grid');
            if (!grid) return;
            grid.innerHTML = appData.g_codes.map(g => `
                <button data-code="${g.code}" class="gcode-btn text-center p-4 bg-white rounded-lg shadow hover:shadow-lg hover:bg-red-50 transition">
                    <span class="font-mono font-bold text-lg text-gray-900">${g.code}</span>
                </button>
            `).join('');

            document.querySelectorAll('.gcode-btn').forEach(btn => {
                btn.addEventListener('click', () => showGCodeModal(btn.dataset.code));
            });
        }

        function showGCodeModal(code) {
            const gcode = appData.g_codes.find(g => g.code === code);
            if (gcode) {
                const modalBody = document.getElementById('modal-body');
                modalBody.innerHTML = `
                    <h3 class="text-2xl font-bold font-mono text-red-600 mb-4">${gcode.code}</h3>
                    <p class="text-gray-800">${gcode.desc}</p>
                    ${gcode.syntax_example ? `<p class="mt-4 text-gray-900 font-semibold">Example Syntax:</p><pre class="bg-gray-100 p-3 rounded-md text-sm font-mono overflow-x-auto">${gcode.syntax_example}</pre>` : ''}
                    ${gcode.syntax_description ? `<p class="mt-2 text-gray-700">${gcode.syntax_description}</p>` : ''}
                `;
                document.getElementById('modal-container').classList.remove('hidden');
                document.getElementById('modal-container').classList.add('flex');
            }
        }

        function showParamModal(paramId) {
            const param = appData.parameters[paramId];
            if (param) {
                const modalBody = document.getElementById('modal-body');
                modalBody.innerHTML = `
                    <h3 class="text-2xl font-bold text-red-600 mb-4">${param.label}</h3>
                    <p class="text-gray-800">${param.description}</p>
                `;
                document.getElementById('modal-container').classList.remove('hidden');
                document.getElementById('modal-container').classList.add('flex');
            }
        }

        function showModuleModal(dayCategory, moduleId) { 
            let moduleContentArray;
            if (dayCategory === 'general_laser') { 
                moduleContentArray = appData.welcome_overview.general_laser_modules_content;
            }
            
            const moduleData = moduleContentArray ? moduleContentArray.find(m => m.id === moduleId) : null;

            if (moduleData) {
                const modalBody = document.getElementById('modal-body');
                modalBody.innerHTML = `
                    <h3 class="text-2xl font-bold text-red-600 mb-4">${moduleData.title}</h3>
                    <div class="text-gray-800">${moduleData.details}</div>
                `;
                document.getElementById('modal-container').classList.remove('hidden');
                document.getElementById('modal-container').classList.add('flex');
            } else {
                console.error("Module data not found for:", dayCategory, moduleId);
            }
        }

        function renderTabContent(tabId) {
            const contentArea = document.getElementById('tab-content');
            const data = appData[tabId];
            if (data) {
                contentArea.innerHTML = data.content;

                // Conditional re-initialization of components based on tabId
                if (tabId === 'welcome_overview') {
                    document.querySelectorAll('.module-btn').forEach(btn => {
                        btn.addEventListener('click', (event) => {
                            const dayCategory = event.currentTarget.dataset.dayCategory; 
                            const moduleId = event.currentTarget.dataset.moduleId; 
                            showModuleModal(dayCategory, moduleId);
                        });
                    });
                } else if (tabId === 'fiber_lab') {
                    initWeldProfileCanvas('fiberWeldProfileCanvas');
                    initPulseShapeChart('fiberPulseShapeChart', 'fiber-pulse-shape-select', 'fiber-pulse-shape-description');
                    document.getElementById('fiber-energy-slider').addEventListener('input', () => updateWeldProfile('fiberWeldProfileCanvas', 'fiber-energy-slider', 'fiber-pulse-width-slider', 'fiber-beam-diameter-slider'));
                    document.getElementById('fiber-pulse-width-slider').addEventListener('input', () => updateWeldProfile('fiberWeldProfileCanvas', 'fiber-energy-slider', 'fiber-pulse-width-slider', 'fiber-beam-diameter-slider'));
                    document.getElementById('fiber-beam-diameter-slider').addEventListener('input', () => updateWeldProfile('fiberWeldProfileCanvas', 'fiber-energy-slider', 'fiber-pulse-width-slider', 'fiber-beam-diameter-slider'));
                    document.getElementById('fiber-pulse-shape-select').addEventListener('change', () => updatePulseShape('fiberPulseShapeChart', 'fiber-pulse-shape-select', 'fiber-pulse-shape-description'));
                } else if (tabId === 'flashlamp_lab') {
                    initWeldProfileCanvas('flashlampWeldProfileCanvas');
                    initPulseShapeChart('flashlampPulseShapeChart', 'flashlamp-pulse-shape-select', 'flashlamp-pulse-shape-description');
                    document.getElementById('flashlamp-volts-slider').addEventListener('input', () => updateWeldProfile('flashlampWeldProfileCanvas', 'flashlamp-volts-slider', 'flashlamp-pulse-width-slider', 'flashlamp-beam-diameter-mm-slider'));
                    document.getElementById('flashlamp-pulse-width-slider').addEventListener('input', () => updateWeldProfile('flashlampWeldProfileCanvas', 'flashlamp-volts-slider', 'flashlamp-pulse-width-slider', 'flashlamp-beam-diameter-mm-slider'));
                    document.getElementById('flashlamp-beam-diameter-mm-slider').addEventListener('input', () => updateWeldProfile('flashlampWeldProfileCanvas', 'flashlamp-volts-slider', 'flashlamp-pulse-width-slider', 'flashlamp-beam-diameter-mm-slider'));
                    document.getElementById('flashlamp-pulse-shape-select').addEventListener('change', () => updatePulseShape('flashlampPulseShapeChart', 'flashlamp-pulse-shape-select', 'flashlamp-pulse-shape-description'));
                } else if (tabId === 'motionfx') {
                    renderGCodeGrid();
                } else if (tabId === 'fundamentals') {
                    document.querySelectorAll('.param-btn').forEach(btn => {
                        btn.addEventListener('click', () => showParamModal(btn.dataset.param));
                    });
                }
            }
        }

        function setupTabs() {
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.dataset.tab;
                    tabs.forEach(t => {
                        if (t.dataset.tab === tabId) {
                            t.classList.remove('tab-inactive');
                            t.classList.add('tab-active');
                        } else {
                            t.classList.remove('tab-active');
                            t.classList.add('tab-inactive');
                        }
                    });
                    renderTabContent(tabId);
                });
            });
            // Click the first tab to load initial content
            tabs[0].click();
        }
        
        function setupModal() {
            const modalContainer = document.getElementById('modal-container');
            const modalClose = document.getElementById('modal-close');
            modalClose.addEventListener('click', () => {
                modalContainer.classList.add('hidden');
                modalContainer.classList.remove('flex');
            });
             modalContainer.addEventListener('click', (e) => {
                // Close modal if clicked outside modal content
                if(e.target === modalContainer) {
                    modalContainer.classList.add('hidden');
                    modalContainer.classList.remove('flex');
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            setupTabs();
            setupModal();

            // Add event listeners for zoomable images
            document.querySelectorAll('.zoomable-image').forEach(img => {
                // Ensure the logo is not zoomable
                if (img.alt === "LaserStar Technologies Logo") {
                    // Added a check for the logo to explicitly not apply zoomable-image class if it's the logo
                    img.classList.remove('zoomable-image'); // Ensure it doesn't get the class
                    img.style.border = 'none'; // Remove border from logo
                    return;
                }
                img.addEventListener('click', () => {
                    const modalBody = document.getElementById('modal-body');
                    const modalImg = document.createElement('img');
                    modalImg.src = img.src;
                    modalImg.alt = img.alt;
                    // Removed modalImg.classList.add('zoomed-in-image'); as zoom is removed
                    
                    modalBody.innerHTML = ''; // Clear previous content
                    modalBody.appendChild(modalImg);
                    
                    document.getElementById('modal-container').classList.remove('hidden');
                    document.getElementById('modal-container').classList.add('flex');
                });
            });
        });
    </script>
</body>
</html>
